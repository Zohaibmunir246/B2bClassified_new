jQuery(document).ready(function($){var btn=$('#top');$(window).scroll(function(){if($(window).scrollTop()>300){btn.fadeIn()}else{btn.fadeOut()}});btn.on('click',function(e){e.preventDefault();$('html, body').animate({scrollTop:0},'300')});$("body").on('click','.fav_add_listing',function(e){e.preventDefault();var $this=$(this);$this.find(".fa-spinner").show();var listing_id=$this.data('lisitngid');var userid=$this.data("user_id");$.ajax({type:"POST",dataType:"json",url:"<?php echo base_url('dashboard/fav_add'); ?>",data:{listing_id:listing_id,userid:userid},success:function(result){console.log(result);if(result=='nolog'){window.location.replace("<?php echo base_url('login?redirected_to=') . base_url() . uri_string(); ?>")}
if(result=='fav_added'){$this.find(".fa-spinner").hide();$this.hide();$this.siblings('.remove_fav_listing').show()}}})});$("body").on('click','.remove_fav_listing',function(e){e.preventDefault();var $this=$(this);$this.find(".fa-spinner").show();var listing_id=$this.data('lisitngid');var userid=$this.data("user_id");$.ajax({type:"POST",dataType:"json",url:"<?php echo base_url('dashboard/remove_fav'); ?>",data:{listing_id:listing_id,userid:userid},success:function(result){console.log(result);if(result=='fav_removed'){$this.find(".fa-spinner").hide();$this.siblings().show();$this.hide()}}})});$("#myModal").modal({backdrop:'static',keyboard:!0,show:!1});var nearToBottom=100;var bottom=!0
var page=2;var masonrow=$('.masonrow');if(masonrow.length>0){$(window).scroll(function(){if(bottom&&$(window).scrollTop()>=($('.masonrow').offset().top+$('.masonrow').outerHeight()-window.innerHeight)){bottom=!1;$('body').find(".spin").show();$.ajax({type:"POST",dataType:"json",url:"<?php echo base_url('mobilehome/index'); ?>",data:{page:page},success:function(result){$('.masonrow').append(result);page++;bottom=!0;$('body').find(".spin").hide()},error:function(){$('body').find(".spin").hide()}})}})}
$(".parent_cat_").on('change',function(e){e.preventDefault();var $this=$(this);var cat_id=$this.val();$('.search-loader').show();$.ajax({type:"POST",dataType:"json",url:"<?php echo base_url('child-cats'); ?>",data:{parent_cat_id:cat_id},success:function(result){$('.child_cat_').empty();jQuery.each(result,function(index,value){$('.child_cat_').append('<option value="'+value.id+'">'+value.name+'</option>')})
$('.search-loader').hide();$('.child_cat_').removeAttr('disabled')}})});$('.state_selected').on('change',function(){let $this=$(this);$('.search-loader').show();$.ajax({method:"POST",url:"<?php echo base_url('users/ajax__get_cities_by_state_id'); ?>",data:{state_id:$($this).val()}}).done(function(data){data=$.parseJSON(data);let html="<option>Choose City</option>";$(data).each(function(i,e){html+="<option value='"+e.id+"' >"+e.name+"</option>"});$('.city_selected').attr('disabled',!1).empty().append(html);$('.search-loader').hide()})});$('.topheader_user_country').change(function(e){let $this=$(this);$('.top-header-loader').show();if($.cookie('volgo_user_country_id')===undefined){$.cookie("volgo_user_country_id",$($this).val(),{expires:2,path:'',domain:'',secure:!1})}else{$.cookie("volgo_user_country_id",$($this).val())}
$.ajax({method:"POST",url:"<?php echo base_url('MobileHome/ajax__get_states_by_country_id'); ?>",data:{country_id:$($this).val()}}).done(function(data){data=$.parseJSON(data);if(data.status==='error'){console.error("unable to get states");return}
$('.top-header-loader').hide();location.reload()})});$('#select_country_burger_menu a,#select_country_burger_menu .selected_country').on('click',function(){$('#select_country_burger_menu').addClass('active')});$('.burger_menu_header a').on('click',function(){$('#select_country_burger_menu').removeClass('active')});$('#select_lang_burger_menu a,#select_lang_burger_menu .selected_country').on('click',function(){$('#select_lang_burger_menu').addClass('active')});$('.burger_menu_header a').on('click',function(){$('#select_lang_burger_menu').removeClass('active')});function readURL(input){if(input.files&&input.files[0]){var reader=new FileReader();reader.onload=function(e){$('#profile_img').attr('src',e.target.result)}
reader.readAsDataURL(input.files[0])}}
$('#profile_pic_').on('change',function(){var property=document.getElementById('profile_pic_').files[0];var form_data=new FormData();form_data.append('file',property);form_data.append('userid',$(this).data('id'));readURL(this);$.ajax({url:"<?php echo base_url('mobilehome/update_profile_pic'); ?>",type:"POST",contentType:!1,cache:!1,processData:!1,data:form_data,success:function(result){}})});$('#parent_cat_my_ads').on('change',function(){$(this).closest('form').submit()});$('input[name="ads_status"]').on('change',function(){$(this).closest('form').submit()});$('.post_del_btn').on('click',function(){$('.post_del_checkbox').slideToggle();$(this).siblings('.post_del_submit_btn').slideToggle()});$('.search_dash_submit').on('click',function(e){e.preventDefault();$(this).siblings('input').val();if($('.dashboard_seach_').length>0){$('.dashboard_seach_ input[name="search_query"]').val($(this).siblings('input').val());$('.dashboard_seach_ input[name="search_query"]').closest('form').submit()}else{$(this).closest('form').submit()}});$('.post_del_submit_btn').on('click',function(){var myCheckboxes=new Array();$('.post_del_checkbox input:checked').each(function(){myCheckboxes.push($(this).val())});$.ajax({url:"<?php echo base_url('dashboard/del-my-ads'); ?>",type:"POST",data:{postIds:myCheckboxes},success:function(result){location.reload()}})});$(".follow_add_listing").click(function(e){e.preventDefault();var $this=$(this);$this.find(".fa-spinner").show();var listing_id=$this.data('lisitngid');var userid=$this.data("user_id");$.ajax({type:"POST",dataType:"json",url:"<?php echo base_url('dashboard/follow_add'); ?>",data:{listing_id:listing_id,userid:userid},success:function(result){console.log(result);if(result=='nolog'){window.location.replace("<?php echo base_url('login?redirected_to=') . base_url() . uri_string(); ?>")}
if(result=='follow_added'){$this.find(".fa-spinner").hide();$this.siblings().show();$this.hide()}}})});$(".remove_follow_listing").click(function(e){e.preventDefault();var $this=$(this);$this.find(".fa-spinner").show();var listing_id=$this.data('lisitngid');var userid=$this.data("user_id");$.ajax({type:"POST",dataType:"json",url:"<?php echo base_url('dashboard/remove_follow'); ?>",data:{listing_id:listing_id,userid:userid},success:function(result){console.log(result);if(result=='follow_removed'){$this.find(".fa-spinner").hide();$this.siblings().show();$this.hide()}}})});jQuery(document).ready(function($){var btn=$('#top');$(window).scroll(function(){if($(window).scrollTop()>300){btn.fadeIn()}else{btn.fadeOut()}});btn.on('click',function(e){e.preventDefault();$('html, body').animate({scrollTop:0},'300')});$("body").on('click','.fav_add_listing',function(e){e.preventDefault();var $this=$(this);$this.find(".fa-spinner").show();var listing_id=$this.data('lisitngid');var userid=$this.data("user_id");$.ajax({type:"POST",dataType:"json",url:"<?php echo base_url('dashboard/fav_add'); ?>",data:{listing_id:listing_id,userid:userid},success:function(result){console.log(result);if(result=='nolog'){window.location.replace("<?php echo base_url('login?redirected_to=') . base_url() . uri_string(); ?>")}
if(result=='fav_added'){$this.find(".fa-spinner").hide();$this.hide();$this.siblings('.remove_fav_listing').show()}}})});$("body").on('click','.remove_fav_listing',function(e){e.preventDefault();var $this=$(this);$this.find(".fa-spinner").show();var listing_id=$this.data('lisitngid');var userid=$this.data("user_id");$.ajax({type:"POST",dataType:"json",url:"<?php echo base_url('dashboard/remove_fav'); ?>",data:{listing_id:listing_id,userid:userid},success:function(result){console.log(result);if(result=='fav_removed'){$this.find(".fa-spinner").hide();$this.siblings().show();$this.hide()}}})});$("#myModal").modal({backdrop:'static',keyboard:!0,show:!1});var nearToBottom=100;var bottom=!0
var page=2;var masonrow=$('.masonrow');if(masonrow.length>0){$(window).scroll(function(){if(bottom&&$(window).scrollTop()>=($('.masonrow').offset().top+$('.masonrow').outerHeight()-window.innerHeight)){bottom=!1;$('body').find(".spin").show();$.ajax({type:"POST",dataType:"json",url:"<?php echo base_url('mobilehome/index'); ?>",data:{page:page},success:function(result){$('.masonrow').append(result);page++;bottom=!0;$('body').find(".spin").hide()},error:function(){$('body').find(".spin").hide()}})}})}
$(".parent_cat_").on('change',function(e){e.preventDefault();var $this=$(this);var cat_id=$this.val();$('.search-loader').show();$.ajax({type:"POST",dataType:"json",url:"<?php echo base_url('child-cats'); ?>",data:{parent_cat_id:cat_id},success:function(result){$('.child_cat_').empty();jQuery.each(result,function(index,value){$('.child_cat_').append('<option value="'+value.id+'">'+value.name+'</option>')})
$('.search-loader').hide();$('.child_cat_').removeAttr('disabled')}})});$('.state_selected').on('change',function(){let $this=$(this);$('.search-loader').show();$.ajax({method:"POST",url:"<?php echo base_url('users/ajax__get_cities_by_state_id'); ?>",data:{state_id:$($this).val()}}).done(function(data){data=$.parseJSON(data);let html="<option>Choose City</option>";$(data).each(function(i,e){html+="<option value='"+e.id+"' >"+e.name+"</option>"});$('.city_selected').attr('disabled',!1).empty().append(html);$('.search-loader').hide()})});$('.topheader_user_country').change(function(e){let $this=$(this);$('.top-header-loader').show();if($.cookie('volgo_user_country_id')===undefined){$.cookie("volgo_user_country_id",$($this).val(),{expires:2,path:'',domain:'',secure:!1})}else{$.cookie("volgo_user_country_id",$($this).val())}
$.ajax({method:"POST",url:"<?php echo base_url('MobileHome/ajax__get_states_by_country_id'); ?>",data:{country_id:$($this).val()}}).done(function(data){data=$.parseJSON(data);if(data.status==='error'){console.error("unable to get states");return}
$('.top-header-loader').hide();location.reload()})});$('#select_country_burger_menu a,#select_country_burger_menu .selected_country').on('click',function(){$('#select_country_burger_menu').addClass('active')});$('.burger_menu_header a').on('click',function(){$('#select_country_burger_menu').removeClass('active')});$('#select_lang_burger_menu a,#select_lang_burger_menu .selected_country').on('click',function(){$('#select_lang_burger_menu').addClass('active')});$('.burger_menu_header a').on('click',function(){$('#select_lang_burger_menu').removeClass('active')});function readURL(input){if(input.files&&input.files[0]){var reader=new FileReader();reader.onload=function(e){$('#profile_img').attr('src',e.target.result)}
reader.readAsDataURL(input.files[0])}}
$('#profile_pic_').on('change',function(){var property=document.getElementById('profile_pic_').files[0];var form_data=new FormData();form_data.append('file',property);form_data.append('userid',$(this).data('id'));readURL(this);$.ajax({url:"<?php echo base_url('mobilehome/update_profile_pic'); ?>",type:"POST",contentType:!1,cache:!1,processData:!1,data:form_data,success:function(result){}})});$('#parent_cat_my_ads').on('change',function(){$(this).closest('form').submit()});$('input[name="ads_status"]').on('change',function(){$(this).closest('form').submit()});$('.post_del_btn').on('click',function(){$('.post_del_checkbox').slideToggle();$(this).siblings('.post_del_submit_btn').slideToggle()});$('.search_dash_submit').on('click',function(e){e.preventDefault();$(this).siblings('input').val();if($('.dashboard_seach_').length>0){$('.dashboard_seach_ input[name="search_query"]').val($(this).siblings('input').val());$('.dashboard_seach_ input[name="search_query"]').closest('form').submit()}else{$(this).closest('form').submit()}});$('.post_del_submit_btn').on('click',function(){var myCheckboxes=new Array();$('.post_del_checkbox input:checked').each(function(){myCheckboxes.push($(this).val())});$.ajax({url:"<?php echo base_url('dashboard/del-my-ads'); ?>",type:"POST",data:{postIds:myCheckboxes},success:function(result){location.reload()}})});$(".follow_add_listing").click(function(e){e.preventDefault();var $this=$(this);$this.find(".fa-spinner").show();var listing_id=$this.data('lisitngid');var userid=$this.data("user_id");$.ajax({type:"POST",dataType:"json",url:"<?php echo base_url('dashboard/follow_add'); ?>",data:{listing_id:listing_id,userid:userid},success:function(result){console.log(result);if(result=='nolog'){window.location.replace("<?php echo base_url('login?redirected_to=') . base_url() . uri_string(); ?>")}
if(result=='follow_added'){$this.find(".fa-spinner").hide();$this.siblings().show();$this.hide()}}})});$(".remove_follow_listing").click(function(e){e.preventDefault();var $this=$(this);$this.find(".fa-spinner").show();var listing_id=$this.data('lisitngid');var userid=$this.data("user_id");$.ajax({type:"POST",dataType:"json",url:"<?php echo base_url('dashboard/remove_follow'); ?>",data:{listing_id:listing_id,userid:userid},success:function(result){console.log(result);if(result=='follow_removed'){$this.find(".fa-spinner").hide();$this.siblings().show();$this.hide()}}})})})